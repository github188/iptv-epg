<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
    <meta name="page-view-size" content="1280*720">
    <title>入口页面</title>
    <link rel="stylesheet" href="./styles/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="./styles/bootstrap.min.css"> -->
    <style>
        body {
            background-color: white;
            padding: 0px;
            margin: 0px;
        }

        .container a {
            text-decoration: none;
            margin-left: 20px;
        }

        #content {
            position: absolute;
            left: 130px;
            bottom: 80px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="container" class="container">
        <!-- 链接列表 -->
    </div>
    <div id="content"></div>
    <script src="../assets/debug/alloy_lever.js"></script>
    <script src="./cfg/config.js"></script>
    <script src="./lib/utils.js"></script>
    <script src="./src/gcl-debug.js"></script>
    <script>
        function $(id) {
            return document.getElementById(id);
        }

        function gotoEPG() {
            window.location.href = '../portal.html';
        }

        function init() {
            
            var linkHtml = '',
                links = GCL_TEST_LINKS;

            for ( var i = 0, len = links.length; i < len; i++ ) {
                linkHtml += '<br>' + links[i].icon + '&nbsp;&nbsp;'
                    + '<a href="' + links[i].link + '">'
                    + links[i].text 
                    + '</a>';
            }

            $('container').innerHTML = linkHtml;

        };

        init();

        var gcl = new GCLDebug();
        gcl.open();

        var iPanel = {};

        gcl.print(
            [
                {key: iPanel, desc: 'ipanel'},
                {key: iPanel.mainFrame, desc: 'ipanel.mainFrame'},
                {key: Authentication, desc: 'Authentication'},
                {key: Authentication.CTCGetConfig('UserID'), desc: 'UserID', isValue: true},
                {key: sessionStorage.getItem('PortalUrl'), desc: 'url', isValue: true}
            ]
        );

        gcl.append('name', 'lizc');
        gcl.append('age', '29');

        gcl.append('location', window.location.href);
        window.onkeydown = function (event) {
            var keycode = event.which ? event.which : event.keycode;
            
            switch (keycode) {
                case 8:
                    gotoEPG();
                    return false;
                break;
                default: return true; break;
            }
        }

        /////////// 请求并下发播放列表
        configChannels();

        setTimeout(function () {
            gcl.append('ChannelCount:' + Authentication.CUGetConfig('ChannelCount'));
            for (var i = 0; i < 10; i++) {
                gcl.append('Channel: ' + Authentication.CUGetConfig('Channel'));
            }
        }, 3000);

        debug('ChannelCount: ' + Authentication.CUGetConfig('ChannelCount'));
        debug('ChannelList: ' + Authentication.CUGetConfig('ChannelList'));

        function debug(str) {
            console.log(str);
        }

        function $(id) {
            return document.getElementById(id);
        }

    </script>

</body>
</html>